# Undo/Redo ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì„œ

## ğŸ“ ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         HistoryManager                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚    undoStack[]      â”‚           â”‚    redoStack[]      â”‚          â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚
â”‚  â”‚  â”‚ Entry N       â”‚â—„â”€â”¼â”€â”€ undo() â”€â”¼â”€â–ºâ”‚ Entry N+1     â”‚  â”‚          â”‚
â”‚  â”‚  â”‚ (latest)      â”‚  â”‚           â”‚  â”‚ (undone)      â”‚  â”‚          â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚           â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚          â”‚
â”‚  â”‚  â”‚ Entry N-1     â”‚  â”‚â—„â”€ redo() â”€â”¼â”€â”€â”‚ Entry N+2     â”‚  â”‚          â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚
â”‚  â”‚  â”‚ Entry 1       â”‚  â”‚           â”‚                     â”‚          â”‚
â”‚  â”‚  â”‚ (oldest)      â”‚  â”‚           â”‚  ìƒˆ ì•¡ì…˜ ë°œìƒ ì‹œ    â”‚          â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚  redoStack í´ë¦¬ì–´   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                      â”‚
â”‚  currentBatch: Map<string, PixelChange>                             â”‚
â”‚  â””â”€â”€ í˜„ì¬ ìŠ¤íŠ¸ë¡œí¬ ì¤‘ì¸ í”½ì…€ ë³€ê²½ë“¤ì„ ëˆ„ì                            â”‚
â”‚      (pointerdown ~ pointerup ì‚¬ì´)                                  â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ íƒ€ì… ì •ì˜

### PixelChange (ë‹¨ì¼ í”½ì…€ ë³€ê²½)
```typescript
interface PixelChange {
  x: number;           // í”½ì…€ X ì¢Œí‘œ
  y: number;           // í”½ì…€ Y ì¢Œí‘œ
  oldColor: RGBA;      // Undo ì‹œ ë³µì›í•  ìƒ‰ìƒ
  newColor: RGBA;      // Redo ì‹œ ì ìš©í•  ìƒ‰ìƒ
}
```

### HistoryEntry (í•˜ë‚˜ì˜ ì•¡ì…˜)
```typescript
type HistoryActionType = 'stroke' | 'erase' | 'fill' | 'ai' | 'clear';

interface HistoryEntry {
  type: HistoryActionType;   // ì•¡ì…˜ ì¢…ë¥˜
  changes: PixelChange[];    // ë³€ê²½ëœ í”½ì…€ë“¤
  timestamp: number;         // ìƒì„± ì‹œê°„
}
```

### RGBA (ìƒ‰ìƒ)
```typescript
interface RGBA {
  r: number;  // 0-255
  g: number;  // 0-255
  b: number;  // 0-255
  a: number;  // 0-255
}
```

---

## ğŸ”„ ë™ì‘ íë¦„

### 1. ì¼ë°˜ ìŠ¤íŠ¸ë¡œí¬ (Brush/Eraser)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  pointerdown                                                      â”‚
â”‚       â”‚                                                           â”‚
â”‚       â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ beginBatch()    â”‚ â† currentBatch ì´ˆê¸°í™”, isRecording = true   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚                                                       â”‚
â”‚           â–¼                                                       â”‚
â”‚  pointermove (ë°˜ë³µ)                                               â”‚
â”‚       â”‚                                                           â”‚
â”‚       â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ recordChange(x, y, oldColor, newColor)  â”‚                      â”‚
â”‚  â”‚                                          â”‚                      â”‚
â”‚  â”‚ if (ê°™ì€ ì¢Œí‘œ ì´ë¯¸ ì¡´ì¬)                  â”‚                      â”‚
â”‚  â”‚   â†’ newColorë§Œ ì—…ë°ì´íŠ¸                  â”‚ â† ë©”ëª¨ë¦¬ ìµœì í™”      â”‚
â”‚  â”‚ else                                     â”‚                      â”‚
â”‚  â”‚   â†’ Mapì— ìƒˆ PixelChange ì¶”ê°€            â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚           â”‚                                                       â”‚
â”‚           â–¼                                                       â”‚
â”‚  pointerup                                                        â”‚
â”‚       â”‚                                                           â”‚
â”‚       â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ commitBatch()   â”‚ â† undoStackì— entry ì¶”ê°€                     â”‚
â”‚  â”‚                 â”‚   redoStack í´ë¦¬ì–´                           â”‚
â”‚  â”‚                 â”‚   maxSize ì´ˆê³¼ ì‹œ oldest ì œê±°                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Fill (ë‹¨ì¼ í´ë¦­ ì•¡ì…˜)

```
pointerdown
     â”‚
     â–¼
beginBatch('fill')
     â”‚
     â–¼
floodFill() â”€â”€â”€ ë‚´ë¶€ì—ì„œ setPixelWithHistory() ë°˜ë³µ í˜¸ì¶œ
     â”‚          â””â”€â”€ recordChange() ìë™ í˜¸ì¶œ
     â–¼
commitBatch() â† ì¦‰ì‹œ ì»¤ë°‹ (ë“œë˜ê·¸ ì—†ìŒ)
```

### 3. AI ì´ë¯¸ì§€ ì ìš©

```
loadAIImage(blob)
     â”‚
     â–¼
createImageBitmap() â†’ scale to pixelSize
     â”‚
     â–¼
engine.applyAIImage(imageData)
     â”‚
     â”œâ”€â”€ beginBatch('ai')
     â”‚
     â”œâ”€â”€ for each pixel:
     â”‚       setPixelWithHistory(x, y, color)
     â”‚
     â””â”€â”€ commitBatch()
```

---

## â†©ï¸ Undo ë™ì‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  undo() í˜¸ì¶œ                                                  â”‚
â”‚       â”‚                                                       â”‚
â”‚       â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ entry = undoStack.pop()             â”‚                      â”‚
â”‚  â”‚ if (!entry) return null             â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚           â”‚                                                   â”‚
â”‚           â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ redoStack.push(entry)               â”‚ â† ë‚˜ì¤‘ì— redo ê°€ëŠ¥  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚           â”‚                                                   â”‚
â”‚           â–¼                                                   â”‚
â”‚  for each change in entry.changes:                            â”‚
â”‚       â”‚                                                       â”‚
â”‚       â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ setPixelDirect(x, y, oldColor)      â”‚ â† ì´ì „ ìƒ‰ìƒ ë³µì›    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚           â”‚                                                   â”‚
â”‚           â–¼                                                   â”‚
â”‚       render()                                                â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## â†ªï¸ Redo ë™ì‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  redo() í˜¸ì¶œ                                                  â”‚
â”‚       â”‚                                                       â”‚
â”‚       â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ entry = redoStack.pop()             â”‚                      â”‚
â”‚  â”‚ if (!entry) return null             â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚           â”‚                                                   â”‚
â”‚           â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ undoStack.push(entry)               â”‚ â† ë‹¤ì‹œ undo ê°€ëŠ¥    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚           â”‚                                                   â”‚
â”‚           â–¼                                                   â”‚
â”‚  for each change in entry.changes:                            â”‚
â”‚       â”‚                                                       â”‚
â”‚       â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ setPixelDirect(x, y, newColor)      â”‚ â† ìƒˆ ìƒ‰ìƒ ì¬ì ìš©    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚           â”‚                                                   â”‚
â”‚           â–¼                                                   â”‚
â”‚       render()                                                â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§  ë©”ëª¨ë¦¬ ìµœì í™” ì „ëµ

### 1. Diff ê¸°ë°˜ ì €ì¥
```
âŒ ìŠ¤ëƒ…ìƒ· ë°©ì‹ (ë¹„íš¨ìœ¨ì )
   64x64 ìº”ë²„ìŠ¤ Ã— 4bytes Ã— 50 íˆìŠ¤í† ë¦¬ = 800KB

âœ… Diff ë°©ì‹ (íš¨ìœ¨ì )
   ë³€ê²½ëœ í”½ì…€ë§Œ ì €ì¥
   ì˜ˆ: ì„  í•˜ë‚˜ = ~100 í”½ì…€ Ã— 12bytes = ~1.2KB
```

### 2. ê°™ì€ ì¢Œí‘œ ë³‘í•©
```typescript
// ë“œë˜ê·¸ ì¤‘ ê°™ì€ í”½ì…€ì„ ì—¬ëŸ¬ ë²ˆ ì§€ë‚˜ê°ˆ ë•Œ
recordChange(x, y, oldColor, newColor) {
  const key = `${x},${y}`;
  const existing = currentBatch.get(key);
  
  if (existing) {
    // oldColorëŠ” ìµœì´ˆ ê°’ ìœ ì§€, newColorë§Œ ìµœì‹ ìœ¼ë¡œ
    existing.newColor = newColor;
  } else {
    currentBatch.set(key, { x, y, oldColor, newColor });
  }
}
```

### 3. ìµœëŒ€ íˆìŠ¤í† ë¦¬ ì œí•œ
```typescript
commitBatch() {
  // ...
  while (undoStack.length > maxHistorySize) {
    undoStack.shift();  // ê°€ì¥ ì˜¤ë˜ëœ í•­ëª© ì œê±°
  }
}
```

---

## âŒ¨ï¸ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤

| ë‹¨ì¶•í‚¤ | ë™ì‘ |
|--------|------|
| `Ctrl + Z` (Windows) / `Cmd + Z` (Mac) | Undo |
| `Ctrl + Shift + Z` (Windows) / `Cmd + Shift + Z` (Mac) | Redo |

```typescript
useEffect(() => {
  const handleKeyDown = (e: KeyboardEvent) => {
    const isMac = navigator.platform.toUpperCase().includes('MAC');
    const modKey = isMac ? e.metaKey : e.ctrlKey;

    if (modKey && e.key === 'z') {
      e.preventDefault();
      if (e.shiftKey) {
        redo();
      } else {
        undo();
      }
    }
  };

  window.addEventListener('keydown', handleKeyDown);
  return () => window.removeEventListener('keydown', handleKeyDown);
}, [undo, redo]);
```

---

## ğŸ¤– AI ê²°ê³¼ì˜ ì•ˆì „í•œ íˆìŠ¤í† ë¦¬ í¬í•¨

### ë¬¸ì œì 
- AI ì´ë¯¸ì§€ëŠ” í•œ ë²ˆì— ìˆ˜ì²œ ê°œì˜ í”½ì…€ì„ ë³€ê²½
- ì¼ë°˜ ìŠ¤íŠ¸ë¡œí¬ì™€ ë™ì¼í•˜ê²Œ ì²˜ë¦¬í•˜ë©´ Undo ì‹œ ì „ì²´ ë³µì› ê°€ëŠ¥

### í•´ê²° ë°©ë²•
```typescript
// PixelEngine.ts
applyAIImage(imageData: ImageData): void {
  // 1. ë°°ì¹˜ ì‹œì‘ (type: 'ai')
  this.historyManager.beginBatch('ai');

  // 2. ëª¨ë“  í”½ì…€ ë³€ê²½ ê¸°ë¡
  for (let y = 0; y < this.resolution; y++) {
    for (let x = 0; x < this.resolution; x++) {
      const idx = (y * this.resolution + x) * 4;
      const color: RGBA = {
        r: imageData.data[idx],
        g: imageData.data[idx + 1],
        b: imageData.data[idx + 2],
        a: imageData.data[idx + 3],
      };
      
      if (color.a > 0) {
        // ê¸°ì¡´ ìƒ‰ìƒë„ í•¨ê»˜ ê¸°ë¡ (Undoìš©)
        this.setPixelWithHistory(x, y, color);
      }
    }
  }

  // 3. í•˜ë‚˜ì˜ ì—”íŠ¸ë¦¬ë¡œ ì»¤ë°‹
  this.historyManager.commitBatch();
  this.render();
}
```

### ê²°ê³¼
- AI ì´ë¯¸ì§€ ì ìš© = 1 HistoryEntry
- Undo 1íšŒë¡œ ì „ì²´ AI ê²°ê³¼ ì·¨ì†Œ ê°€ëŠ¥
- ì´ì „ ìº”ë²„ìŠ¤ ìƒíƒœë¡œ ì™„ë²½ ë³µì›

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
AssetsEditor/
â”œâ”€â”€ engine/
â”‚   â”œâ”€â”€ HistoryManager.ts    â† Undo/Redo í•µì‹¬ ë¡œì§
â”‚   â””â”€â”€ PixelEngine.ts       â† íˆìŠ¤í† ë¦¬ í†µí•©ëœ í”½ì…€ ì—”ì§„
â”œâ”€â”€ context/
â”‚   â””â”€â”€ AssetsEditorContext.tsx  â† React ìƒíƒœ ê´€ë¦¬ & ì´ë²¤íŠ¸ í•¸ë“¤ë§
â””â”€â”€ components/
    â”œâ”€â”€ Canvas.tsx           â† Pointer ì´ë²¤íŠ¸ ë°”ì¸ë”©
    â””â”€â”€ LeftToolbar.tsx      â† Undo/Redo ë²„íŠ¼ UI
```

---

## ğŸ§ª ì‚¬ìš© ì˜ˆì‹œ

```typescript
// Contextì—ì„œ ì œê³µí•˜ëŠ” API
const { 
  undo, 
  redo, 
  canUndo, 
  canRedo, 
  historyState 
} = useAssetsEditor();

// UIì—ì„œ ì‚¬ìš©
<button onClick={undo} disabled={!canUndo}>
  â†© Undo ({historyState.undoCount})
</button>

<button onClick={redo} disabled={!canRedo}>
  Redo ({historyState.redoCount}) â†ª
</button>
```
